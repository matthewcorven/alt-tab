{
    "version": "https://jsonfeed.org/version/1",
    "title": "alt-tab.io â€¢ All posts by \"gpt-4\" tag",
    "description": "A blog about software development and its intersections with personal life, hobbies and interests.",
    "home_page_url": "https://alt-tab.io",
    "items": [
        {
            "id": "https://alt-tab.io/2023/05/06/ChatGPT%20Plugins%20-%20First%20Impressions/",
            "url": "https://alt-tab.io/2023/05/06/ChatGPT%20Plugins%20-%20First%20Impressions/",
            "title": "ChatGPT Plugins - First Impressions",
            "date_published": "2023-05-06T04:00:00.000Z",
            "content_html": "<div style=\"display: flex; flex-direction: column; align-items: center; justify-content: center\">\n  <iframe src=\"https://giphy.com/embed/NoHe3HpB1Mg8w\" width=\"336\" height=\"193\" frameBorder=\"0\" class=\"giphy-embed\" allowFullScreen></iframe><p><a href=\"https://giphy.com/gifs/movie-up-NoHe3HpB1Mg8w\">via GIPHY</a></p>\n</div>\n\n<h2 id=\"Shiny-New-Toy\"><a href=\"#Shiny-New-Toy\" class=\"headerlink\" title=\"Shiny New Toy\"></a>Shiny New Toy</h2><p><strong>Enter Stage Right:</strong> ChatGPT&#39;s initial plugin framework release promises to dazzle by connecting it to the internet.  </p>\n<blockquote>\n<p>OpenAI plugins connect ChatGPT to third-party applications. These plugins enable ChatGPT to interact with APIs defined by developers, enhancing ChatGPT&#39;s capabilities and allowing it to perform a wide range of actions.</p>\n<p><em>OpenAI</em>, <a href=\"https://platform.openai.com/docs/plugins/introduction\">Chat Plugins</a> [30 April 2023]</p>\n</blockquote>\n<h2 id=\"Availability\"><a href=\"#Availability\" class=\"headerlink\" title=\"Availability\"></a>Availability</h2><p>At the moment, plugin development is a <a href=\"https://openai.com/waitlist/plugins\"><em>Limited Alpha</em> behind a wait-list</a> and plugins can be shared with up to <a href=\"https://platform.openai.com/docs/plugins/introduction/plugin-flow\">15 fellow developers</a> (who also have access to plugins).  It&#39;s early times for sure, but if the pace of ChatGPT over the past year is any indication we are sure to have a full marketplace of both free and paid plugins within weeks of my writing this blog post.</p>\n<h2 id=\"Architecture\"><a href=\"#Architecture\" class=\"headerlink\" title=\"Architecture\"></a>Architecture</h2><p>ChatGPT plugins are constructed with:</p>\n<ol>\n<li><strong>One or more REST API endpoints</strong> implemented in any language and&#x2F;or framework you prefer: Node.js, Deno, .NET Web API or Minimal API, Ruby, Rust, Go, Azure APIM, Azure Logic App, Azure Function, AWS Lamda or whatever else you fancy. (<a href=\"https://www.ibm.com/docs/en/SS4SVW_3.0.0/backmatter/pdf.pdf\">COBOL</a> diehards rejoice!)<ul>\n<li>OpenAI provides a <a href=\"https://github.com/openai/plugins-quickstart\">Python-based &quot;TODO API&quot; plugin</a> to get you started with local experimentation.  It seems pretty useless until you realize that by tinkering with the inputs and outputs, even parameter names, you will begin to witness the power of ChatGPT&#39;s language processing capabilities; everything is context.</li>\n</ul>\n</li>\n<li><strong>A manifest file</strong> (<code>yourdomain.com/.well-known/ai-plugin.json</code>) describing the plugin to ChatGPT.  The contents and structure of this file are likely to change, but the most critical bits are:<ul>\n<li>Plugin name and description (for display in the ChatGPT UI)</li>\n<li>Plugin description (for the model to understand at a high level what your plugin does)</li>\n<li>A logo URL</li>\n<li>Your contact and legal information</li>\n<li>Authentication mechanism, if applicable to your API</li>\n</ul>\n</li>\n<li><strong>An <a href=\"https://swagger.io/docs/specification/basic-structure/\">OpenAPI specification</a> (YAML) file</strong>.  ChatGPT&#39;s language processing is a &quot;natural&quot; ðŸ¤£ at parsing this contract to understand what each API endpoint can do (descriptions, route methods) as well as how the input &amp; output models are shaped (component schemas).  O<strong>p</strong>enAPI isn&#39;t to be confused with Open<strong>AI</strong>; this specification predates OpenAI and is used for all sorts of things unrelated to AI.  It&#39;s a well-established standard that is used by many API providers, including Microsoft, Google, and Amazon.  This alone is the most exciting&#x2F;terrifying part - public REST APIs around the globe are already in a position to offer knowledge and actions to ChatGPT, merely by having an OpenAPI specification available.  What&#39;s more, the same specification supports describing that most common authentication patterns, so you can offer ChatGPT users the ability to authenticate with your API and perform actions on their behalf.</li>\n</ol>\n<h2 id=\"Plugin-Flow-Production\"><a href=\"#Plugin-Flow-Production\" class=\"headerlink\" title=\"Plugin Flow (Production)\"></a>Plugin Flow (Production)</h2><pre class=\"mermaid\">sequenceDiagram\n  autonumber\n  actor User\n  participant Client Browser\n  participant OpenAI Servers\n  participant Plugin Provider API\n  User->>Client Browser: Select Plugin\n  Client Browser->>OpenAI Servers: Register Plugin with User's ChatGPT profile\n  OpenAI Servers-->>Client Browser: Inject compact plugin context <br>(description & endpoints)<br>into hidden prompt message\n  Client Browser-->>User: Render UI\n  User->>Client Browser: Prompt\n  activate Client Browser\n  Client Browser->>OpenAI Servers: User Prompt + Plugin context\n  activate OpenAI Servers\n  OpenAI Servers-->>OpenAI Servers: AI Reasoning\n  OpenAI Servers->>Plugin Provider API: Perform commands and/or queries<br>against Plugin API\n  activate Plugin Provider API\n  Plugin Provider API-->>Plugin Provider API: Plugin logic\n  Plugin Provider API-->>OpenAI Servers: Text, Links or Markdown \n  deactivate Plugin Provider API\n  OpenAI Servers-->>OpenAI Servers: Incorporate Plugin API results into response\n  OpenAI Servers-->>Client Browser: Text & Meta\n  Client Browser-->>User: Render response\n  deactivate OpenAI Servers\n  deactivate Client Browser</pre>\n\n<h2 id=\"Plugin-Flow-Local-Development\"><a href=\"#Plugin-Flow-Local-Development\" class=\"headerlink\" title=\"Plugin Flow (Local Development)\"></a>Plugin Flow (Local Development)</h2><p>To enable local development of a plugin, ChatGPT turns the tables and calls your API from the browser.  This changes the flow dramatically:</p>\n<pre class=\"mermaid\">sequenceDiagram\n  autonumber\n  participant Plugin Provider API\n  actor User\n  participant Client Browser\n  participant OpenAI Servers\n  User->>Client Browser: Select Plugin\n  Client Browser->>OpenAI Servers: Register Plugin with User's ChatGPT profile\n  OpenAI Servers-->>Client Browser: Inject compact plugin context <br>(description & endpoints)<br>into hidden prompt message\n  Client Browser-->>User: Render UI\n  User->>Client Browser: Prompt\n  activate Client Browser\n  Client Browser->>OpenAI Servers: User Prompt + Plugin context\n  activate OpenAI Servers\n  OpenAI Servers-->>OpenAI Servers: AI Reasoning\n  OpenAI Servers-->>Client Browser: Request Plugin API call\n  Client Browser->>Plugin Provider API: Perform commands and/or queries<br>against Plugin API\n  activate Plugin Provider API\n  Plugin Provider API-->>Plugin Provider API: Plugin logic\n  Plugin Provider API-->>Client Browser: Text, Links or Markdown \n  deactivate Plugin Provider API\n  Client Browser-->>OpenAI Servers: Relay response to Server\n  OpenAI Servers-->>OpenAI Servers: Incorporate Plugin API results into response\n  OpenAI Servers-->>Client Browser: Text & Meta\n  Client Browser-->>User: Render response\n  deactivate OpenAI Servers\n  deactivate Client Browser</pre>\n\n<h2 id=\"Local-quot-Quickstart-quot-Demo\"><a href=\"#Local-quot-Quickstart-quot-Demo\" class=\"headerlink\" title=\"Local &quot;Quickstart&quot; Demo\"></a>Local &quot;Quickstart&quot; Demo</h2><p>OpenAI provides a sample TODO API on GitHub so that you can clone or download, and try it out with ChatGPT in a few minutes time.  It&#39;s implemented in Python, so if you don&#39;t already have a local Python development environment setup you&#39;ll need to do that.  </p>\n<p>There are numerous ways of getting Python running locally.  For beginners, the article below walks you through setting up Python 3 on your operating system of choice:</p>\n<p><a href=\"https://realpython.com/installing-python/\">Python 3 Installation &amp; Setup Guide</a></p>\n<h3 id=\"Running-the-Plugin-API-Locally\"><a href=\"#Running-the-Plugin-API-Locally\" class=\"headerlink\" title=\"Running the Plugin (API) Locally\"></a>Running the Plugin (API) Locally</h3><p>Once you have Python set up, execute the TODO API with <code>python main.py</code> and you&#39;ll see the server spin up and await calls from ChatGPT.  The output should look something like this:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt; python main.py</span><br><span class=\"line\"></span><br><span class=\"line\"> * Serving Quart app <span class=\"string\">&#x27;main&#x27;</span></span><br><span class=\"line\"> * Environment: production</span><br><span class=\"line\"> * Please use an ASGI server (e.g. Hypercorn) directly <span class=\"keyword\">in</span> production</span><br><span class=\"line\"> * Debug mode: True</span><br><span class=\"line\"> * Running on http://0.0.0.0:5003 (CTRL + C to quit)</span><br><span class=\"line\">[2023-04-30 17:56:58 -0400] [4776] [INFO] Running on http://0.0.0.0:5003 (CTRL + C to quit)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Connect-ChatGPT\"><a href=\"#Connect-ChatGPT\" class=\"headerlink\" title=\"Connect ChatGPT\"></a>Connect ChatGPT</h3><p>Getting ChatGPT connected to the local TODO API is pretty straightforward. In a nutshell:</p>\n<ol>\n<li>From any ChatGPT chat, change your Model to <strong>Plugins</strong> and then use the dropdown to navigate to the <strong>Plugin Store</strong></li>\n<li>Click <strong>Develop your own plugin</strong></li>\n<li>Supply the URL with port number (such as <code>http://localhost:5003</code>)</li>\n</ol>\n<p>Once connected properly, you&#39;ll see the logo of your plugin displayed in the &quot;Plugins&quot; dropdown.</p>\n<h3 id=\"Test-Drive\"><a href=\"#Test-Drive\" class=\"headerlink\" title=\"Test Drive!\"></a>Test Drive!</h3><p>By installing your plugin in the previous step, you&#39;re providing ChatGPT with the manifest and OpenAPI specification, both of which inform the model of what your plugin API can do and how to interact.  </p>\n<p>Let&#39;s get the show on the road.  I&#39;d like to know what&#39;s on my TODO list (it should be empty at the moment), and I&#39;ll add some items afterward:</p>\n<p><img src=\"/2023-05-15T224510.png\" alt=\"2023-05-15T224510\"></p>\n<p>Okay that&#39;s neat.  What happens if I try to add more than one item at a time?</p>\n<p><img src=\"/2023-05-15T224540.png\" alt=\"2023-05-15T224540\"></p>\n<p>I&#39;m mildly impressed that this prompt did all these things, but I&#39;m less impressed that it required 7 API calls to add 7 items.  Why on earth didn&#39;t ChatGPT just send them all in one request?  Because our API doesn&#39;t support that in the request model, and ChatGPT is being a good consumer of the API.</p>\n<p>We can refactor the Python code pretty quickly to support this.  We&#39;ll also need to change the request model to accept a list of items, and then we&#39;ll need to change the code to iterate over the list and add each item individually.  We&#39;ll also need to change the response model to return a list of items.  Let&#39;s do it...</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># main.py</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># ...</span></span><br><span class=\"line\"><span class=\"meta\">@app.post(<span class=\"params\"><span class=\"string\">&quot;/todos/&lt;string:username&gt;&quot;</span></span>)</span></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"keyword\">def</span> <span class=\"title function_\">add_todo</span>(<span class=\"params\">username</span>):</span><br><span class=\"line\">    request = <span class=\"keyword\">await</span> quart.request.get_json(force=<span class=\"literal\">True</span>)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> username <span class=\"keyword\">not</span> <span class=\"keyword\">in</span> _TODOS:</span><br><span class=\"line\">        _TODOS[username] = []</span><br><span class=\"line\"></span><br><span class=\"line\">    _TODOS[username].append(request[<span class=\"string\">&quot;todo&quot;</span>])</span><br><span class=\"line\">    <span class=\"keyword\">return</span> quart.Response(response=<span class=\"string\">&#x27;OK&#x27;</span>, status=<span class=\"number\">200</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># ... becomes:</span></span><br><span class=\"line\"><span class=\"meta\">@app.post(<span class=\"params\"><span class=\"string\">&quot;/todos/&lt;string:username&gt;&quot;</span></span>)</span></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"keyword\">def</span> <span class=\"title function_\">add_todos</span>(<span class=\"params\">username</span>):</span><br><span class=\"line\">    request = <span class=\"keyword\">await</span> quart.request.get_json(force=<span class=\"literal\">True</span>)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> username <span class=\"keyword\">not</span> <span class=\"keyword\">in</span> _TODOS:</span><br><span class=\"line\">        _TODOS[username] = []</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">if</span> <span class=\"string\">&#x27;todos&#x27;</span> <span class=\"keyword\">in</span> request <span class=\"keyword\">and</span> <span class=\"built_in\">isinstance</span>(request[<span class=\"string\">&#x27;todos&#x27;</span>], <span class=\"built_in\">list</span>):</span><br><span class=\"line\">      todos = request[<span class=\"string\">&#x27;todos&#x27;</span>]; <span class=\"comment\"># extract the list of todos</span></span><br><span class=\"line\">      <span class=\"keyword\">for</span> todo <span class=\"keyword\">in</span> todos:</span><br><span class=\"line\">        <span class=\"keyword\">if</span> todo <span class=\"keyword\">not</span> <span class=\"keyword\">in</span> _TODOS[username]: <span class=\"comment\"># don&#x27;t add duplicates</span></span><br><span class=\"line\">          _TODOS[username].append(todo)</span><br><span class=\"line\">      <span class=\"keyword\">return</span> quart.Response(response=<span class=\"string\">&#x27;OK&#x27;</span>, status=<span class=\"number\">200</span>)</span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">      <span class=\"keyword\">return</span> quart.Response(response=<span class=\"string\">&#x27;Bad Request, todos missing&#x27;</span>, status=<span class=\"number\">400</span>)</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># openapi.yaml</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># ...</span></span><br><span class=\"line\"><span class=\"attr\">components:</span></span><br><span class=\"line\">  <span class=\"attr\">schemas:</span></span><br><span class=\"line\">    <span class=\"attr\">getTodosResponse:</span></span><br><span class=\"line\">      <span class=\"comment\"># ...</span></span><br><span class=\"line\">    <span class=\"attr\">addTodoRequest:</span></span><br><span class=\"line\">      <span class=\"attr\">type:</span> <span class=\"string\">object</span></span><br><span class=\"line\">      <span class=\"attr\">required:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">todo</span></span><br><span class=\"line\">      <span class=\"attr\">properties:</span></span><br><span class=\"line\">        <span class=\"attr\">todo:</span></span><br><span class=\"line\">          <span class=\"attr\">type:</span> <span class=\"string\">string</span></span><br><span class=\"line\">          <span class=\"attr\">description:</span> <span class=\"string\">The</span> <span class=\"string\">todo</span> <span class=\"string\">to</span> <span class=\"string\">add</span> <span class=\"string\">to</span> <span class=\"string\">the</span> <span class=\"string\">list.</span></span><br><span class=\"line\">          <span class=\"attr\">required:</span> <span class=\"literal\">true</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># ... becomes:</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"attr\">addTodoRequest:</span></span><br><span class=\"line\">      <span class=\"attr\">type:</span> <span class=\"string\">object</span></span><br><span class=\"line\">      <span class=\"attr\">required:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">todos</span></span><br><span class=\"line\">      <span class=\"attr\">properties:</span></span><br><span class=\"line\">        <span class=\"attr\">todos:</span></span><br><span class=\"line\">          <span class=\"attr\">type:</span> <span class=\"string\">array</span></span><br><span class=\"line\">          <span class=\"attr\">items:</span></span><br><span class=\"line\">            <span class=\"attr\">type:</span> <span class=\"string\">string</span></span><br><span class=\"line\">          <span class=\"attr\">description:</span> <span class=\"string\">The</span> <span class=\"string\">todos</span> <span class=\"string\">to</span> <span class=\"string\">add</span> <span class=\"string\">to</span> <span class=\"string\">the</span> <span class=\"string\">list.</span></span><br><span class=\"line\">          <span class=\"attr\">required:</span> <span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>\n\n<p>Let&#39;s summarize the changes we made:</p>\n<ul>\n<li>We changed the code to iterate over the list of todos</li>\n<li>We tweaked the code to disallow duplicate todos in the datastore (unplanned changed, but a good one).  Also unplanned, we added a check to make sure the request contained a list of todos.</li>\n<li>We changed the request model to accept a list of todos</li>\n<li>We updated the specification&#39;s request model definition <em>and description</em></li>\n</ul>\n<p>And now we can test it out:</p>\n<p><img src=\"/2023-05-15T224602.png\" alt=\"2023-05-15T224602\"></p>\n<p>Only one request.  Nice!  Let&#39;s flex our new-found muscles and add support for deleting multiple todos.  Our changes will be very similar:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># main.py</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># ...</span></span><br><span class=\"line\"><span class=\"meta\">@app.post(<span class=\"params\"><span class=\"string\">&quot;/todos/&lt;string:username&gt;&quot;</span></span>)</span></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"keyword\">def</span> <span class=\"title function_\">add_todo</span>(<span class=\"params\">username</span>):</span><br><span class=\"line\">    request = <span class=\"keyword\">await</span> quart.request.get_json(force=<span class=\"literal\">True</span>)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> username <span class=\"keyword\">not</span> <span class=\"keyword\">in</span> _TODOS:</span><br><span class=\"line\">        _TODOS[username] = []</span><br><span class=\"line\">    _TODOS[username].append(request[<span class=\"string\">&quot;todo&quot;</span>])</span><br><span class=\"line\">    <span class=\"keyword\">return</span> quart.Response(response=<span class=\"string\">&#x27;OK&#x27;</span>, status=<span class=\"number\">200</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># ... becomes:</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@app.delete(<span class=\"params\"><span class=\"string\">&quot;/todos/&lt;string:username&gt;&quot;</span></span>)</span></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"keyword\">def</span> <span class=\"title function_\">delete_todos</span>(<span class=\"params\">username</span>):</span><br><span class=\"line\">    request = <span class=\"keyword\">await</span> quart.request.get_json(force=<span class=\"literal\">True</span>)</span><br><span class=\"line\">    <span class=\"comment\"># fail silently, it&#x27;s a simple plugin</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> <span class=\"string\">&#x27;todos_idx&#x27;</span> <span class=\"keyword\">in</span> request <span class=\"keyword\">and</span> <span class=\"built_in\">isinstance</span>(request[<span class=\"string\">&#x27;todos_idx&#x27;</span>], <span class=\"built_in\">list</span>):</span><br><span class=\"line\">        todos_idx = request[<span class=\"string\">&quot;todos_idx&quot;</span>]</span><br><span class=\"line\">        <span class=\"keyword\">for</span> todo_idx <span class=\"keyword\">in</span> <span class=\"built_in\">sorted</span>(todos_idx, reverse=<span class=\"literal\">True</span>):    </span><br><span class=\"line\">            <span class=\"keyword\">if</span> <span class=\"number\">0</span> &lt;= todo_idx &lt; <span class=\"built_in\">len</span>(_TODOS[username]):</span><br><span class=\"line\">                _TODOS[username].pop(todo_idx)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> quart.Response(response=<span class=\"string\">&#x27;OK&#x27;</span>, status=<span class=\"number\">200</span>)</span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> quart.Response(response=<span class=\"string\">&#x27;Bad Request, todos_idx missing&#x27;</span>, status=<span class=\"number\">400</span>)</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># openapi.yaml</span></span><br><span class=\"line\">    <span class=\"attr\">delete:</span></span><br><span class=\"line\">      <span class=\"attr\">operationId:</span> <span class=\"string\">deleteTodo</span></span><br><span class=\"line\">      <span class=\"attr\">summary:</span> <span class=\"string\">Delete</span> <span class=\"string\">a</span> <span class=\"string\">todo</span> <span class=\"string\">from</span> <span class=\"string\">the</span> <span class=\"string\">list</span></span><br><span class=\"line\">      <span class=\"comment\"># ...</span></span><br><span class=\"line\">      <span class=\"attr\">requestBody:</span></span><br><span class=\"line\">        <span class=\"attr\">required:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">        <span class=\"attr\">content:</span></span><br><span class=\"line\">          <span class=\"attr\">application/json:</span></span><br><span class=\"line\">            <span class=\"attr\">schema:</span></span><br><span class=\"line\">              <span class=\"string\">$ref:</span> <span class=\"string\">&#x27;#/components/schemas/deleteTodoRequest&#x27;</span></span><br><span class=\"line\">      <span class=\"comment\"># ...</span></span><br><span class=\"line\"><span class=\"comment\"># ...</span></span><br><span class=\"line\">    <span class=\"attr\">delete:</span></span><br><span class=\"line\">      <span class=\"attr\">operationId:</span> <span class=\"string\">deleteTodos</span></span><br><span class=\"line\">      <span class=\"attr\">summary:</span> <span class=\"string\">Delete</span> <span class=\"string\">todos</span> <span class=\"string\">from</span> <span class=\"string\">the</span> <span class=\"string\">list</span></span><br><span class=\"line\">      <span class=\"comment\"># ...</span></span><br><span class=\"line\">      <span class=\"attr\">requestBody:</span></span><br><span class=\"line\">        <span class=\"attr\">required:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">        <span class=\"attr\">content:</span></span><br><span class=\"line\">          <span class=\"attr\">application/json:</span></span><br><span class=\"line\">            <span class=\"attr\">schema:</span></span><br><span class=\"line\">              <span class=\"string\">$ref:</span> <span class=\"string\">&#x27;#/components/schemas/deleteTodosRequest&#x27;</span></span><br><span class=\"line\"><span class=\"comment\"># ...</span></span><br><span class=\"line\"><span class=\"attr\">components:</span></span><br><span class=\"line\">  <span class=\"attr\">schemas:</span></span><br><span class=\"line\">    <span class=\"comment\"># ...</span></span><br><span class=\"line\">    <span class=\"attr\">deleteTodoRequest:</span></span><br><span class=\"line\">      <span class=\"attr\">type:</span> <span class=\"string\">object</span></span><br><span class=\"line\">      <span class=\"attr\">required:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">todo_idx</span></span><br><span class=\"line\">      <span class=\"attr\">properties:</span></span><br><span class=\"line\">        <span class=\"attr\">todo_idx:</span></span><br><span class=\"line\">          <span class=\"attr\">type:</span> <span class=\"string\">integer</span></span><br><span class=\"line\">          <span class=\"attr\">description:</span> <span class=\"string\">The</span> <span class=\"string\">index</span> <span class=\"string\">of</span> <span class=\"string\">the</span> <span class=\"string\">todo</span> <span class=\"string\">to</span> <span class=\"string\">delete.</span></span><br><span class=\"line\">          <span class=\"attr\">required:</span> <span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"comment\"># ... becomes:</span></span><br><span class=\"line\">    <span class=\"attr\">deleteTodosRequest:</span></span><br><span class=\"line\">      <span class=\"attr\">type:</span> <span class=\"string\">object</span></span><br><span class=\"line\">      <span class=\"attr\">required:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">todos_idx</span></span><br><span class=\"line\">      <span class=\"attr\">properties:</span></span><br><span class=\"line\">        <span class=\"attr\">todos_idx:</span></span><br><span class=\"line\">          <span class=\"attr\">type:</span> <span class=\"string\">array</span></span><br><span class=\"line\">          <span class=\"attr\">items:</span></span><br><span class=\"line\">            <span class=\"attr\">type:</span> <span class=\"string\">integer</span></span><br><span class=\"line\">          <span class=\"attr\">description:</span> <span class=\"string\">The</span> <span class=\"string\">indexes</span> <span class=\"string\">of</span> <span class=\"string\">the</span> <span class=\"string\">todos</span> <span class=\"string\">to</span> <span class=\"string\">delete.</span></span><br><span class=\"line\">          <span class=\"attr\">required:</span> <span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>\n\n<p>Let&#39;s summarize the changes we made:</p>\n<ul>\n<li>We changed the code to iterate over the list of todo indexes</li>\n<li>We changed the request model to accept a list of todo indexes</li>\n<li>We updated the specification&#39;s response model definition <em>and description</em></li>\n</ul>\n<p>Let&#39;s clear out our TODO list all at once:</p>\n<p><img src=\"/2023-05-15T224619.png\" alt=\"2023-05-15T224619\"></p>\n<p>I&#39;m pretty forgetful.  For instance, I&#39;ve been known to duplicate duplicate items to my grocery shopping list.  What would be the outcome with this ChatGPT TODO plugin?</p>\n<p><img src=\"/2023-05-15T224628.png\" alt=\"2023-05-15T224628\"></p>\n<p>Ugh oh.  Our plugin code disregards the duplicate entry, but as far as ChatGPT is concerned all is well up until the point that it loads again from the plugin and compares to its own internal list. </p>\n<p>The solution is for the plugin to respond to duplicate entry attempts with an informative message for ChatGPT to take into its context:</p>\n<p><img src=\"/2023-05-15T224708.png\" alt=\"2023-05-15T224708\"></p>\n<p>ChatGPT understands that <code>dentist</code> can&#39;t be added twice, but I&#39;m not happy with it&#39;s mischaracterization &quot;...was already on your list, so I didn&#39;t add it again.&quot;  Lies!  ChatGPT did indeed try to add <code>dentist</code> a second time, and was merely prohibited.  </p>\n<p>I can resolve this by informing ChatGPT duplicates should not be added.  This might however result in ChatGPT querying all TODOs before each addition, causing a lot of unnecessary chatter.  Instead I&#39;ll tweak the plugin again, this time instruct ChatGPT to update its internal list when conflicts such as this occur:</p>\n<p><img src=\"/2023-05-15T224645.png\" alt=\"2023-05-15T224645\"></p>\n<h2 id=\"Conclusion\"><a href=\"#Conclusion\" class=\"headerlink\" title=\"Conclusion\"></a>Conclusion</h2><p>This is fun tech, for sure.  What will I do with it?  Hard to say - I&#39;m just trying to keep up like everyone else.  I&#39;m not sure if I&#39;ll be able to make a living off of it, but I&#39;m sure I&#39;ll have fun trying.  I hope you do too!</p>\n<div class=\"references\">\n\n<h2 id=\"References\"><a href=\"#References\" class=\"headerlink\" title=\"References\"></a>References</h2><ol>\n<li><a href=\"https://platform.openai.com/docs/introduction/overview\"><strong>OpenAI Platform</strong> docs site</a> is a must-read on all matters of interacting with OpenAI&#39;s API.<ul>\n<li><a href=\"https://platform.openai.com/docs/plugins/examples\"><strong>Several more plugin examples</strong></a> with source code.  Check here for use of OAuth and other authentication methods, and giving ChatGPT more memory of conversations as well as semantic search (aka &quot;question answering&quot;).</li>\n<li><strong>Usage Policies</strong> includes a <a href=\"https://openai.com/policies/usage-policies#plugin-policies\">section on plugins</a>.  It&#39;s not mentioned in the enclosed changelog, so either it&#39;s been there all along or it&#39;s a new addition without notice.</li>\n</ul>\n</li>\n<li><a href=\"https://community.openai.com/t/context-length-vs-max-token-vs-maximum-length/125585\">OpenAI Community Forum: &quot;Context length VS Max token VS Maximum length&quot;</a></li>\n</ol>\n</div>\n",
            "tags": [
                "ChatGPT",
                "OpenAI",
                "AI",
                "NLP",
                "GPT-4",
                "Plugins",
                "Python"
            ]
        }
    ]
}